- fn: 'test-procedure-1.1'
  args:
    - int
    - int
  return:
    - int
    - int
  doc: 'this is test procedure 1.1'
  statements:
    - name: joint-1
      call: int-add
      in:
        - $0
        - $1
    - name: joint-2
      call: int-sub
      in:
        - $0
        - $1
  out:
    - joint-1[0]
    - joint-2[0]

- fn: 'test-procedure-1.2'
  args:
    - float
    - float
  return:
    - float
    - float
  doc: 'this is test procedure 1.2'
  statements:
    - name: joint-1
      call: float-add
      in:
        - $0
        - $1
    - name: joint-2
      call: float-mul
      in:
        - $0
        - $1
    - name: joint-3
      call: float-mul
      in:
        - joint-1[0]
        - joint-2[0]
    - name: joint-4
      call: float-add
      in:
        - joint-1[0]
        - joint-2[0]
  out:
    - joint-3[0]
    - joint-4[0]


- fn: 'test-procedure-1.3'
  args:
    - float
    - float
    - float
  return:
    - float
  doc: '(x + y) * z'
  statements:
    - name: joint-1
      call: float-add
      in:
        - $0
        - $1
    - name: joint-2
      call: float-mul
      in:
        - joint-1[0]
        - $2
  out:
    - joint-2[0]

- fn: 'test-procedure-1.4'
  args:
    - float
    - float
    - float
  return:
    - float
  doc: 'x + y * z'
  statements:
    - name: joint-1
      call: float-mul
      in:
        - $1
        - $2
    - name: joint-2
      call: float-add
      in:
        - $0
        - joint-1[0]
  out:
    - joint-2[0]

- fn: 'test-procedure-1.5'
  args:
    - bool
    - float
    - float
  return:
    - float
  doc: 'z ? x + y : x - y'
  statements:
    - name: x-plus-y
      call: float-add
      in:
        - $1
        - $2
    - name: x-minus-y
      call: float-sub
      in:
        - $1
        - $2
    - name: plus-or-minus
      call: float-converge2
      in:
        - $0
        - x-plus-y[0]
        - x-minus-y[0]
  out:
    - plus-or-minus[0]


- fn: 'test-procedure-1.6'
  args:
    - bool
    - float
    - float
  return:
    - float
  doc: 'z ? x + y : x - y (optimized)'
  statements:
    - name: select-x
      call: float-diverge2@builtin
      in:
        - $0
        - $1
    - name: x-plus-y
      call: float-add@builtin
      in:
        - select-x[0]
        - $2
    - name: x-minus-y
      call: float-sub@builtin
      in:
        - select-x[1]
        - $2
    - name: plus-or-minus
      call: float-converge2@builtin
      in:
        - $0
        - x-plus-y[0]
        - x-minus-y[0]
  out:
    - plus-or-minus[0]